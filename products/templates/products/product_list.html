{% extends "base.html" %} 

{% block styles %} 
{% load static %}
<link rel="stylesheet" href="{% static 'products/css/product_list.css' %}" />
{% endblock styles %} 


{% block scripts %}
<script src="{% static 'products/js/product_list.js' %}"></script>
{% endblock scripts %}

{% block main_content %}
<!-- Main Content -->
<main>
    <h2 class="section-title">ì˜¤ëŠ˜ì˜ ìƒí’ˆ ì¶”ì²œ</h2>
    <div class="product-list">
        {% for item in product_data %}
        <div class="product-item">
            <a href="{% url 'products:product_detail' item.product.id  %}">
            {% if item.image %}
                <img src="{{ item.image }}" alt="{{ item.product.name }}">
            {% else %}
                <img src="{% static 'products/images/default_image.jpg' %}" alt="No Image Available">
            {% endif %}
            </a>
            
            <!-- ì¢‹ì•„ìš” ë²„íŠ¼ (í•˜íŠ¸ ì•„ì´ì½˜) -->
            <div class="like-container">
                <form method="POST" action="{% url 'products:like_product' item.product.id %}" class="like-form">
                    {% csrf_token %}
                    <button type="button" class="like-button {% if request.user in item.product.liked_users.all %}liked{% endif %}" 
                            data-product-id="{{ item.product.id }}">
                        {% if request.user in item.product.liked_users.all %}
                            â¤ï¸<!-- ì¢‹ì•„ìš” ìƒíƒœ: ë¹¨ê°„ í•˜íŠ¸ -->
                        {% else %}
                            ğŸ¤ <!-- ë¹„ì¢‹ì•„ìš” ìƒíƒœ: íˆ¬ëª…/íšŒìƒ‰ í•˜íŠ¸ -->
                        {% endif %}
                    </button>
                </form>
            </div>
            
            <div class="product-details">
                <p class="product-name">{{ item.product.name }}</p>
                <p class="product-price">{{ item.product.price|default:"0" }} ì›</p>
                <p class="product-date">{{ item.product.created_at|date:"Yë…„ mì›” dì¼" }}</p>
                <span class="like-count">Like: {{ item.product.likes_count }}</span> <!-- ì¢‹ì•„ìš” ìˆ˜ í‘œì‹œ -->
            </div>
        </div>
        {% empty %}
        <p class="empty-message">ë“±ë¡ëœ ìƒí’ˆì´ ì—†ìŠµë‹ˆë‹¤.</p>
        {% endfor %}
    </div>
</main>
{% endblock main_content %}
